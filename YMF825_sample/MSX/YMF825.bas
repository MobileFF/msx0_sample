1 'SAVE"YMF825-2.BAS"
1000 'Init
1010   D$="08"
1020   _IOTFIND("device/i2c_a",C)
1030   PRINT "IOTFIND:";C
1040   IF C=0 THEN 1200:'Not Found
1050   _IOTFIND("device/i2c_a",A$(0),C)
1060   PRINT "Slave Address : ";
1070   FOR I=0 TO C-1
1080     PRINT A$(I);" ";
1090     IF A$(I)=D$ THEN 1300:'Create Device Path
1100   NEXT I
1200 'Not Found
1210   PRINT "Device not found."
1220   END
1300 'Create Device Path
1310   N$="device/i2c_a/"+A$(I)

2000 'Main
2010   PRINT
2020   PRINT "---- YMF825 ----"

3000 'INIT
3010 PRINT "---- INIT ----"
3100 RESTORE 40000:'INITDB
3120 FOR I=1 TO 18
3130 GOSUB 20000:'WRITE
3140 NEXT I

4000 'TONE
4010 PRINT "---- TONE ----"
4100 RESTORE 41000:'TONEDB
4110 GOSUB 20000:'Write Word
4120 GOSUB 20000:'Write Word
4130 GOSUB 21000:'Write Multi Bytes

5000 'CHANNEL
5010 PRINT "---- CHANNEL ----"
5100 RESTORE 42000:'CHANNELDB
5110 FOR I=1 TO 5
5120   GOSUB 20000:'Write Word
5130 NEXT I

6000 'LOOP
6010 PRINT "---- LOOP ----"
6100 KA=&H14
6110 KD=&H65
6120 GOSUB 30000:'Loop SubRoutine
6200 KA=&H1C
6210 KD=&H11
6220 GOSUB 30000:'Loop SubRoutine
6300 KA=&H1C
6310 KD=&H42
6320 GOSUB 30000:'Loop SubRoutine
6400 KA=&H1C
6410 KD=&H5D
6420 GOSUB 30000:'Loop SubRoutine
6500 KA=&H24
6510 KD=&H17
6520 GOSUB 30000:'Loop SubRoutine
6600 PRINT "----- LOOP END ----"
6610 GOTO 6000:'LOOP

20000 'Write Word
20100 _IOTPUT(N$,CHR$(2))
20110 READ V1$
20120 _IOTPUT(N$,CHR$(VAL("&H"+V1$)))
20130 READ V2$
20140 _IOTPUT(N$,CHR$(VAL("&H"+V2$)))
20150 PRINT "["+V1$+V2$+"]"
20200 RETURN

21000 'Write Multi Bytes
21100 READ CN
21110 _IOTPUT(N$,CHR$(CN))
21120 PRINT "[";
21230 FOR IM=1 TO CN
21240   READ V$
21250   PRINT V$;
21260   _IOTPUT(N$,CHR$(VAL("&H"+V$)))
21270 NEXT IM
21280 PRINT "]"
21300 RETURN

22000 'Write Custom Word
22100 _IOTPUT(N$,CHR$(2))
22110 _IOTPUT(N$,CHR$(VAL("&H"+V$ )))
22120 _IOTPUT(N$,CHR$(VAL("&H"+V2$)))
22200 RETURN

30000 'Loop SubRoutine
30100 GOSUB 31000:'KEYON
30110 FOR I=0 TO 320:NEXT I:'WAIT
30120 GOSUB 32000:'KEYOFF
30130 FOR I=0 TO 130:NEXT I:'WAIT
30140 RETURN

31000 'KEYON
31010 PRINT "---- KEYON ----"
31100 RESTORE 50000:'KEYONDB
31110 GOSUB 20000:'Write Word
31120 GOSUB 20000:'Write Word
31130 READ V$
31140 V2$=HEX$(KA)
31150 GOSUB 22000:'Write Custom Word
31160 READ V$
31170 V2$=HEX$(KD)
31180 GOSUB 22000:'Write Custom Word
31190 GOSUB 20000:'Write Word
31200 RETURN

32000 'KEYOFF
32010 PRINT "---- KEYOFF ----"
32100 RESTORE 51000:'KEYOFFDB
32110 GOSUB 20000:'Write Word
32120 RETURN

40000 'INITDB
40010 DATA 1D,00,02,0E
40020 DATA 00,01,01,00,1A,A3
40030 DATA 1A,00
40040 DATA 02,04
40050 DATA 02,00,19,F0,1B,3F,14,00,03,01,08,F6
40060 DATA 08,00,09,F8,0A,00,17,40,18,00
41000 'TONEDB
41010 DATA 08,F6
41020 DATA 08,00
41030 DATA 36,07,81,01,85,00,7F,F4,BB,00,10,40,00,AF,A0,0E,03,10,40,00,2F,F3,9B,00,20,41,00,AF,A0,0E,01,10,40,80,03,81,80
42000 'CHANNELDB
42010 DATA 0F,30
42020 DATA 10,71
42030 DATA 11,00
42040 DATA 12,08
42050 DATA 13,00
50000 'KEYDB
50010 DATA 0B,00
50020 DATA 0C,54
50030 DATA 0D
50040 DATA 0E
50050 DATA 0F,40
51000 'KEYOFFDB
51010 DATA 0F,00